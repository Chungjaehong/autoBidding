<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Hello World!</title>
		<link href="http://netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

		<link href="./css/axis/AXJ.css" rel="stylesheet" />
		<link href="./css/axis/AXInput.css" rel="stylesheet" />
		<link href="./css/axis/AXGrid.css" rel="stylesheet" />
		<link href="./css/axis/AXButton.css" rel="stylesheet" />
    	<link href="./css/bootstrap.min.css" rel="stylesheet">
    	<link href="./css/style.css" rel="stylesheet">


		<script>window.$ = window.jQuery = require('./js/jquery-3.1.0.js');</script>
		<script src="./js/axis/AXJ.js"></script>
		<script src="./js/axis/AXGrid.js"></script>
		<script src="./js/bootstrap.min.js"></script>
		<script src="./js/hmac-sha256.js"></script>
		<script src="./js/enc-base64-min.js"></script>
  </head>
  <style type="css/text">
  </style>
  <body>
		<div class="container-fluid">
			<div class="row">
				<div class="col-md-12">
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div class="row">
						<div class="col-md-6">
							<input type="button" id="btnTestAjax" value="ajaxTest" class="AXButton Blue">
							<input type="button" id="btnTestAjax2" value="ajaxTest2" class="AXButton Blue">
							<input type="button" id="btnTestAjax3" value="ajaxTest3" class="AXButton Blue">
							<input type="button" id="btnUser" value="계정 동기화" class="AXButton Blue">
						</div>
						<div class="col-md-6 text-right">
							<input type="button" id="btnGroup" value="그룹 동기화" class="AXButton Blue">
							<input type="button" id="btnBiddingStart" value="입찰 시작" class="AXButton Blue">
							<input type="button" id="btnBiddingStop" value="입찰 중지" class="AXButton Blue">
						</div>
					</div>
					<ul class="nav nav-tabs">
						<li class="active" id="userDataMenu">
							<a href="#">계정정보</a>
						</li>
						<li id="groupDataMenu">
							<a href="#">자동 입찰</a>
						</li>
					</ul>
					<div class="row">
						<div class="col-md-12">
							<div id="userDataDiv"> 
								<h4>[그룹 리스트]</h4>
								<div id="userDataGrid"></div>
							</div>
							
							<div id="groupDataDiv">
								<div class="col-md-12" align="right"> <font size="3em" color="#6799FF" id="myMoney"></font> </div>
								<div id="groupDataGrid" style="height:150px;"></div>
								<h4>[키워드 리스트]</h4>
								<div id="keywordGrid" style="height:550px;"></div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-8">
							<div class="progress">
								<div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">
									<span class="sr-only"></span>
								</div>
							</div>
						</div>
						<div class="col-md-4">
							<label>라벨 라벨</label>
						</div>
					</div>
				</div>
			</div>
	</div>
  </body>

<script>
	//화면 구성
	$("#groupDataDiv").hide();
	$("#btnBiddingStart").hide();
	$("#btnBiddingStop").hide();
	
	require('./js/gridMake.js');
	require('./js/dataPick.js');
	require('./js/fileControll.js');
	require('./js/bidding.js');

	$(document).ready(function(){
		readFile("myInfo.ini","myInfo");
		fnObj.usergrid.bind();
		$("#ifrView").attr("src","");
		readFile("usergrid.json","usergrid");
	});

	$(".nav-tabs a").click(function(event) {
		event.preventDefault();
		$(this).parent().addClass("active");
		$(this).parent().siblings().removeClass("active");
	});

	$("#groupDataMenu").click(function(){//자동 입찰 탭
		$("#groupDataDiv").show();
		$("#userDataDiv").hide();

		$("#btnUser").hide();
		$("#btnGroup").hide();
		$("#btnBiddingStart").show();
		$("#btnBiddingStop").hide();

		fnObj.groupGrid.bind();
		fnObj.keywordGrid.bind();
	});

	$("#userDataMenu").click(function(){//계정정보 탭
		$("#userDataDiv").show();
		$("#groupDataDiv").hide();

		$("#btnUser").show();
		$("#btnGroup").show();
		$("#btnBiddingStart").hide();
		$("#btnBiddingStop").hide();

		fnObj.usergrid.bind();
		$("#userDataGrid_AX_checkAll_AX_0_AX_2").hide();
		
		readFile("usergrid.json","usergrid");
	});

	$("#btnBiddingStop").click(function(){ // 입찰 중지 버튼
		$("#btnBiddingStart").show();
		$("#btnBiddingStop").hide();

		clearInterval(timerId);
	});
	
	progressFunction = function(val){//프로그래스 펑션
		$('.progress-bar').css('width', val+'%').attr('aria-valuenow', val);
	}

	$("#btnTestAjax").click(function(){
		//그룹동기화
		$("#groupDataMenu").click();
		$(".nav-tabs a").click();
		fnObj.groupGrid.bind();
		fnObj.keywordGrid.bind();

		chkVar =usergrid.getCheckedList(2);
		
		keyArData = new Array();

		for(var i=0; i < chkVar.length ; i++){
			ajaxPick("GET" , "/ncc/keywords" , "?nccAdgroupId=" + chkVar[i].nccAdgroupId + "&recordSize=1000" , function(data){
				chkVar[i].keyCout = data.length;
				for(var j=0; j < data.length ; j++){
					data[j].NudeKeyword = data[j].managedKeyword.pCPLMaxDepth;
					data[j].nowRank = 0;
					data[j].maxPay = 10000;
					data[j].biddingPay = 100;
					data[j].wantRank = 1;
					data[j].___checked = {"0":true};
					if(data[j].status == "ELIGIBLE"){
						data[j].status = "ON";
					}else{
						data[j].status = "OFF";
					}
				}
				keyArData.push(data);
			});
		}
		groupGrid.setList(chkVar, null, "reload");
		keywordGrid.setList(keyArData[0], null, "reload");
		
		groupGrid.setFocus(groupGridIndex);

		writeFile(JSON.stringify(usergrid.getList()),"usergrid.json");
	});

	$("#btnTestAjax2").click(function(){
		//입찰 시작


	});


</script>

<script>
	require('./renderer.js')
</script>


</html>
